Це найважливіше питання експлуатації. Ти абсолютно правий: мати файл бекапу — це лише пів справи. Треба вміти з нього відновитися.

Відповідь: НІ, тобі не треба вводити команди руками. Ansible зробить це за тебе.

Але тут є два сценарії відновлення, і вони відрізняються.

Сценарій 1: "М'яка поломка" (Хтось щось зламав)

Ситуація: Мережа працює, SSH доступ є, але хтось (або ти) випадково видалив VLAN, змінив IP на інтерфейсі або збив налаштування OSPF.
Рішення: Запустити Ansible-плейбук "Restore".

Ansible працює дуже розумно:

Він читає твій файл бекапу (текстовий).

Він заходить на роутер.

Він порівнює те, що є на роутері, з тим, що у файлі.

Він вводить тільки ті команди, які необхідні, щоб повернути все як було.

Плейбук для відновлення (playbooks/restore.yml)

Створи цей файл. Це твоя "червона кнопка".

code
Yaml
download
content_copy
expand_less
---
- name: RESTORE CONFIGURATION FROM BACKUP
  hosts: cisco
  gather_facts: no
  connection: network_cli

  vars:
    # Вказуємо дату бекапу, з якого хочемо відновитись (можна змінювати перед запуском)
    restore_date: "2025-12-04" 

  tasks:
    - name: Apply Configuration from File
      cisco.ios.ios_config:
        # Вказуємо шлях до файлу бекапу
        src: "../backups/{{ restore_date }}/{{ inventory_hostname }}.cfg"
        # force: yes означає "не питай, просто роби" (залежить від версії модуля)
      
    - name: Save Config to Memory
      cisco.ios.ios_config:
        save_when: always

Як це показати на захисті:

Заходиш на R1, видаляєш OSPF (no router ospf 1).

Показуєш: "Мережа впала".

Запускаєш: ansible-playbook playbooks/restore.yml.

Ansible бачить, що OSPF немає, і заливає його з файлу.

Мережа піднялася.

Сценарій 2: "Жорстка поломка" (Роутер згорів / Заміна на новий)

Ситуація: Ти видалив роутер з GNS3 і поставив новий (чистий). Або в реальному житті купив новий з магазину.
Проблема: На новому роутері немає IP-адреси і немає SSH. Ansible не може до нього підключитися, щоб залити бекап. Це проблема "Курки і яйця".

Рішення: "Базовий кікстарт" (Bootstrap).

Тобі доведеться зробити мінімальні дії руками (через консольний кабель), щоб пустити Ansible:

Ввімкнути роутер.

Налаштувати IP на менеджмент-інтерфейсі.

Увімкнути SSH і створити юзера ansible.

(Все інше зробить Ansible).

Тобто в цьому сценарії ти руками вводиш 5 рядків, а Ansible доливає решту 500 рядків (VLANs, OSPF, ACL, NAT, DHCP...).

Сценарій 3: Професійний "Config Replace" (Для диплома - вищий пілотаж)

У Cisco є команда configure replace. Вона дозволяє повністю замінити поточний конфіг на той, що у файлі (видалити все зайве і додати все потрібне).

Якщо ти хочеш реалізувати це через Ansible, це складніше (треба спочатку закинути файл на флешку роутера через SCP), але це гарантує 100% копію.

Для бакалавра: Тобі вистачить Сценарію 1 (модуль ios_config з параметром src).
Він працює як "Merge" (Злиття): він накладе старі налаштування поверх поточних. Для відновлення IP, маршрутів та інтерфейсів цього достатньо.

Висновок

Тобі не треба писати int g0/0/1 ip add... руками.
Ти запускаєш команду:
ansible-playbook playbooks/restore.yml
І йдеш пити каву, поки скрипт відновлює мережу.
